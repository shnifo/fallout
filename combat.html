<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>5x5 Weighted Grid Generator</title>
<style>
  body {
    background-color: #1e1e1e;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 0;
    padding: 10px;
  }
  h1 {
    margin-bottom: 10px;
    font-size: 1.3em;
  }
  .controls {
    display: inline-block;
    background-color: #2b2b2b;
    padding: 8px;
    border-radius: 10px;
    margin-bottom: 10px;
    width: 95%;
    max-width: 400px;
  }
  .controls label {
    display: flex;
    justify-content: space-between;
    margin: 3px 0;
    font-size: 0.9em;
  }
  .controls input {
    width: 50px;
    text-align: right;
  }
  #grid {
    display: grid;
    grid-template-columns: 12% repeat(5, 1fr);
    gap: 2px;
    justify-items: center;
    width: 100%;
    max-width: 100vw;
    margin: 0 auto;
  }
  .tile {
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    border-radius: 6px;
    color: white;
    width: 100%;
    aspect-ratio: 1/1;
    font-size: 4vw;
    user-select: none;
  }
  .label {
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 3vw;
    color: #ddd;
    width: 100%;
    aspect-ratio: 1/1;
  }
  button {
    background-color: #444;
    color: white;
    border: none;
    padding: 8px 12px;
    font-size: 1em;
    margin-top: 6px;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background-color: #666;
  }
  @media (min-width: 500px) {
    .tile { font-size: 2em; }
    .label { font-size: 1em; }
    .controls label { font-size: 1em; }
    .controls input { width: 60px; }
  }
</style>
</head>
<body>

<h1>5x5 Weighted Grid Generator</h1>

<div class="controls">
  <h3>Tile Weighting</h3>
  <label>üí£ Explosive: <input type="number" id="explosive" value="1" step="0.1"></label>
  <label>üß± Cover: <input type="number" id="cover" value="1" step="0.1"></label>
  <label>ü™® Ruins: <input type="number" id="ruins" value="1" step="0.1"></label>
  <label>‚ùå Impassible: <input type="number" id="impassible" value="1" step="0.1"></label>
  <label>‚≠ê Special: <input type="number" id="special" value="1" step="0.1"></label>
  <label>‚¨õ Blank: <input type="number" id="blank" value="1" step="0.1"></label>
  <button id="generate" onclick="generateGrid()">Generate Grid</button>
</div>

<h3 id="zone-display" style="text-align:center; margin-bottom: 8px;">Zone: ‚Äî</h3>
<div id="grid"></div>

<script>
  const tileTypes = [
    { name: "Explosive", symbol: "üí£", color: "#e25822" },
    { name: "Cover", symbol: "üß±", color: "#888888" },
    { name: "Ruins", symbol: "ü™®", color: "#6b4f3a" },
    { name: "Impassible", symbol: "‚ùå", color: "#4a148c" },
    { name: "Special", symbol: "‚≠ê", color: "#e6c200" },
    { name: "Blank", symbol: "", color: "#2b2b2b" }
  ];

  const rowLabels = ["A","B","C","D","E"];
  const colLabels = ["1","2","3","4","5"];

  function generateGrid() {
    const weights = [
      parseFloat(document.getElementById("explosive").value),
      parseFloat(document.getElementById("cover").value),
      parseFloat(document.getElementById("ruins").value),
      parseFloat(document.getElementById("impassible").value),
      parseFloat(document.getElementById("special").value),
      parseFloat(document.getElementById("blank").value)
    ];

    const totalWeight = weights.reduce((a, b) => a + b, 0);
    const probabilities = weights.map(w => w / totalWeight);

    const gridContainer = document.getElementById("grid");
    gridContainer.innerHTML = "";

    // Top-left corner
    const corner = document.createElement("div");
    corner.className = "label";
    gridContainer.appendChild(corner);

    // Column labels
    for (let c = 0; c < colLabels.length; c++) {
      const colLabel = document.createElement("div");
      colLabel.className = "label";
      colLabel.textContent = colLabels[c];
      gridContainer.appendChild(colLabel);
    }

    // Rows and tiles
    for (let r = 0; r < 5; r++) {
      // Row label
      const rowLabel = document.createElement("div");
      rowLabel.className = "label";
      rowLabel.textContent = rowLabels[r];
      gridContainer.appendChild(rowLabel);

      for (let c = 0; c < 5; c++) {
        const tileType = weightedRandom(tileTypes, probabilities);
        const tile = document.createElement("div");
        tile.className = "tile";
        tile.style.backgroundColor = tileType.color;
        tile.textContent = tileType.symbol;
        gridContainer.appendChild(tile);
      }
    }
  }

  function weightedRandom(items, probabilities) {
    let r = Math.random();
    let sum = 0;
    for (let i = 0; i < items.length; i++) {
      sum += probabilities[i];
      if (r <= sum) return items[i];
    }
    return items[items.length - 1];
  }

  generateGrid();
  // === Zone Table Data ===
const zoneTable = {
  11: "Office: Contains 2 Vending machines with 1d6 Nuka Cola / Sunset Sarsaparilla for 10c each. Autojacker to open.",
  12: "Department Store: Scavenged stackables give +1 yield. Use Flashlight to add +2 to scavenge roll.",
  13: "Bunker: Scavenged items have +1 durability. Use Breatherator to add +2 to scavenge roll.",
  14: "Graveyard: -1 enemy. Use Hammerator to add +2 to scavenge roll.",
  15: "Condominium: Refresh all skill/luck/resist when sleeping here.",
  16: "Factory: Contains a random tech, or fully repairs the same tech if you already have it.",

  21: "Museum: Contains 1 artifact. Use Hackerator for heavy relic worth 1d6√ó100c.",
  22: "Prison: +1 enemy. Contains a random military equipment item.",
  23: "Park: Contains a random potted plant. Plants grown here give +100% yield if left for one level.",
  24: "Railyard: Contains 1d3 flares (10c). Flares reduce enemies by 1 in Ruins.",
  25: "Library: Order a random recipe that arrives on level up. Use Hackerator to order another.",
  26: "Warehouse: Ship your items to any hex; they arrive on level up.",

  31: "Casino: Contains a slot machine. Spend 40c to roll 1d6√ó10c. Crit = 120c jackpot, 1 = break.",
  32: "Laundromat: Spend 50c to reroll armor values.",
  33: "Workshop: Has a workbench; repairing items costs 1 less scrap.",
  34: "Missile Silo: Spend 10 tech scrap to fire a missile at any hex (30 explosive damage).",
  35: "Armory: Spend 10 gun scrap to upgrade a weapon with +1 damage.",
  36: "Bank: Deposit caps, gain 20% on level up. Withdraw at any bank.",

  41: "Military Base: Scavenging weapons/armor here gives +1 to rolls.",
  42: "Farm: Contains brahmin. CHA 1d6 milk (-1 thirst, -1 rad, 20c) or AGI 1d6 flesh (-1 hunger, +20% HP, 20c). Crit: 3√ó yield.",
  43: "Quarry: Use explosives to excavate gemstones worth 1d6√ó50c (bulky).",
  44: "Crash Site: Contains a mutator that transforms a weapon into its mutated form.",
  45: "Campsite: Can scavenge for 1d3 flares. Crit: find 2√ó.",
  46: "Foundry: Spend 10 armor scrap to add +1 to all defense values of an armor.",

  51: "Interchange: Generates any faction‚Äôs settlement 3 hexes away.",
  52: "Laboratory: Generates a Ruins from 5 choices 3 hexes away.",
  53: "Airport: Generates an adjacent Subway. Contains 1 flare for each Subway.",
  54: "Resort: Generates adjacent irradiated lake island (+3 to scavenging).",
  55: "Subway: Generates another Subway 5 hexes away. You can fast travel between cleared Subways.",
  56: "Stadium: Contains a wandering duelist that will 1v1 for a random loot prize.",

  61: "Hospital: When you heal or remove a status, heal +10% or remove 1 extra.",
  62: "Restaurant: Can order food (1d6+10 rations) that arrives on level up.",
  63: "Hotel: Sleeping here grants 'Well Rested'.",
  64: "Junkyard: Has a workbench. Scrapping gives +1 scrap.",
  65: "Supermarket: Scavenging food/water gives +1 to rolls and yield.",
  66: "Church: No battle. Friendly merchant with 2 bodyguards trades and has random + crit loot."
};

// === Zone Generator Function ===
function generateZone() {
  const d1 = Math.floor(Math.random() * 6) + 1;
  const d2 = Math.floor(Math.random() * 6) + 1;
  const roll = d1 * 10 + d2;
  const zone = zoneTable[roll] || "Unknown Zone";
  document.getElementById("zone-display").textContent = `${zone}`;
}

// Modify your existing ‚ÄúGenerate Map‚Äù button click logic to also call this:
document.getElementById("generate").addEventListener("click", () => {
  generateGrid();
  generateZone();
});

</script>

</body>
</html>
